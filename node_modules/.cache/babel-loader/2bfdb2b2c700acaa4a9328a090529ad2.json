{"ast":null,"code":"import\"antd-mobile/lib/flex/style\";import _Flex from\"antd-mobile/lib/flex\";import\"antd-mobile/lib/wing-blank/style\";import _WingBlank from\"antd-mobile/lib/wing-blank\";import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/white-space/style\";import _WhiteSpace from\"antd-mobile/lib/white-space\";import\"antd-mobile/lib/list/style\";import _List from\"antd-mobile/lib/list\";import\"antd-mobile/lib/input-item/style\";import _InputItem from\"antd-mobile/lib/input-item\";import _regeneratorRuntime from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import\"antd-mobile/lib/toast/style\";import _Toast from\"antd-mobile/lib/toast\";import _asyncToGenerator from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";/**\n * 修改密码\n */import React,{Component}from'react';import NavHeader from'@/components/common/NavHeader';import{createForm}from'rc-form';// import {regexp} from '@/plugins/common/regexp'\nimport{CLEAR_USER_INFO}from'@/store/actions';import{connect}from'react-redux';import{CLIENT_INTERFACE}from'@/plugins/libs/interfaceMap';import axios from'@/plugins/requestServer/httpClient';var UpdatePassword=/*#__PURE__*/function(_Component){_inherits(UpdatePassword,_Component);var _super=_createSuper(UpdatePassword);function UpdatePassword(){var _this;_classCallCheck(this,UpdatePassword);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.tiggerUpdatePwd=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getFieldValue,oldPwd,newPwd1,newPwd2,res,that;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getFieldValue=_this.props.form.getFieldValue;oldPwd=getFieldValue('oldPwd');newPwd1=getFieldValue('newPwd1');newPwd2=getFieldValue('newPwd2');if(!(!oldPwd||!newPwd1||!newPwd2)){_context.next=7;break;}_Toast.info('账号和密码不能为空',1);return _context.abrupt(\"return\");case 7:_context.prev=7;_context.next=10;return axios.post(CLIENT_INTERFACE.UPDATE_PWD,{oldPwd:oldPwd,newPwd1:newPwd1,newPwd2:newPwd2});case 10:res=_context.sent;if(!(res.data.err!=='0')){_context.next=14;break;}_Toast.info(res.data.msg,1);return _context.abrupt(\"return\");case 14:_this.props.clearUserInfo();that=_assertThisInitialized(_this);_Toast.info(\"修改密码成功，即将跳转到登录，请重新登录\",1);setTimeout(function(){that.props.history.replace('/login');},1000);_context.next=24;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](7);console.log(_context.t0);_Toast.info('请求异常',1);//需删除\ncase 24:case\"end\":return _context.stop();}}},_callee,null,[[7,20]]);}));return _this;}_createClass(UpdatePassword,[{key:\"componentDidMount\",value:function componentDidMount(){document.body.querySelector(\".qm-login-page\").style.height=window.innerHeight+\"px\";}},{key:\"render\",value:function render(){var getFieldProps=this.props.form.getFieldProps;return/*#__PURE__*/React.createElement(\"div\",{className:\"qm-main-page\"},/*#__PURE__*/React.createElement(NavHeader,null),/*#__PURE__*/React.createElement(\"div\",{className:\"qm-login-page qm-fill-width \"},/*#__PURE__*/React.createElement(\"div\",{className:\"qm-title-box sub-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},\"\\u4FEE\\u6539\\u5BC6\\u7801\")),/*#__PURE__*/React.createElement(_Flex,{justify:\"center\"},/*#__PURE__*/React.createElement(_Flex.Item,null,/*#__PURE__*/React.createElement(_WingBlank,{size:\"lg\"},/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(_InputItem,Object.assign({},getFieldProps('oldPwd'),{type:\"password\",placeholder:\"\\u65E7\\u5BC6\\u7801\"}))),/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(_InputItem,Object.assign({},getFieldProps('newPwd1'),{type:\"password\",placeholder:\"\\u65B0\\u5BC6\\u7801\"}))),/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(_InputItem,Object.assign({},getFieldProps('newPwd2'),{type:\"password\",placeholder:\"\\u65B0\\u5BC6\\u7801\"}))),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"xl\"}),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"xl\"}),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"xl\"}),/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:this.tiggerUpdatePwd.bind(this)},\"\\u786E\\u5B9A\\u4FEE\\u6539\"),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"}))))));}}]);return UpdatePassword;}(Component);;export default connect(function(state,props){return state;},{clearUserInfo:function clearUserInfo(data){return{type:CLEAR_USER_INFO,data:data};}})(createForm()(UpdatePassword));","map":null,"metadata":{},"sourceType":"module"}