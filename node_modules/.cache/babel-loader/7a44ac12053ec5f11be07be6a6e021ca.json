{"ast":null,"code":"import\"antd-mobile/lib/flex/style\";import _Flex from\"antd-mobile/lib/flex\";import\"antd-mobile/lib/wing-blank/style\";import _WingBlank from\"antd-mobile/lib/wing-blank\";import\"antd-mobile/lib/button/style\";import _Button from\"antd-mobile/lib/button\";import\"antd-mobile/lib/white-space/style\";import _WhiteSpace from\"antd-mobile/lib/white-space\";import\"antd-mobile/lib/list/style\";import _List from\"antd-mobile/lib/list\";import\"antd-mobile/lib/input-item/style\";import _InputItem from\"antd-mobile/lib/input-item\";import _regeneratorRuntime from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import\"antd-mobile/lib/toast/style\";import _Toast from\"antd-mobile/lib/toast\";import _asyncToGenerator from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{createForm}from'rc-form';import{USER_IDNTITY,getIdntityName,getUnIdntityName}from'@/plugins/resurceStatus/user';import{regexp}from'@/plugins/common/regexp';import{SET_USER_INFO}from'@/store/actions';import{connect}from'react-redux';import{CLIENT_INTERFACE}from'@/plugins/libs/interfaceMap';import axios from'axios';var BasicInputExample=/*#__PURE__*/function(_React$Component){_inherits(BasicInputExample,_React$Component);var _super=_createSuper(BasicInputExample);function BasicInputExample(){var _this;_classCallCheck(this,BasicInputExample);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.tiggerLogin=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var getFieldValue,accountId,password,accountType,res,userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getFieldValue=_this.props.form.getFieldValue;accountId=getFieldValue('accountId');password=getFieldValue('pwd');accountType=_this.state.loginUserIdentity;if(!(accountId===undefined||password===undefined)){_context.next=7;break;}_Toast.info('账号和密码不能为空',1);return _context.abrupt(\"return\");case 7:if(regexp.regMobile.test(accountId)){_context.next=10;break;}_Toast.info('请输入正确的11位手机号',1);return _context.abrupt(\"return\");case 10:_context.prev=10;_context.next=13;return axios({url:CLIENT_INTERFACE.LOGIN,method:'post',headers:{'Content-Type':'application/json; charset=UTF-8'},data:{accountId:accountId,password:password,accountType:accountType}});case 13:res=_context.sent;if(!(res.data.err!=='0')){_context.next=17;break;}_Toast.info(res.data.msg,1);return _context.abrupt(\"return\");case 17:userData={accountId:accountId,accountType:accountType,token:res.data.result.token};_this.props.setUserInfo(userData);if(_this.props.history.location.pathname==='/login'){_this.props.history.replace(_this.props.user.redirectPath);}_context.next=25;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](10);console.log(_context.t0);case 25:case\"end\":return _context.stop();}}},_callee,null,[[10,22]]);}));_this.switchIndtify=function(){_this.setState({loginUserIdentity:_this.state.loginUserIdentity===USER_IDNTITY.FOREIGN_STAFF?USER_IDNTITY.BANK_STAFF:USER_IDNTITY.FOREIGN_STAFF});};_this.state={loginUserIdentity:USER_IDNTITY.BANK_STAFF};return _this;}_createClass(BasicInputExample,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({loginUserIdentity:this.props.user.accountType});document.body.querySelector(\".qm-login-page\").style.height=window.innerHeight+\"px\";}},{key:\"render\",value:function render(){var getFieldProps=this.props.form.getFieldProps;return/*#__PURE__*/React.createElement(\"div\",{className:\"qm-login-page qm-fill-width \"},/*#__PURE__*/React.createElement(\"div\",{className:\"qm-title-box sub-title\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},getIdntityName(this.state.loginUserIdentity),\"\\u767B\\u5F55\")),/*#__PURE__*/React.createElement(_Flex,{justify:\"center\"},/*#__PURE__*/React.createElement(_Flex.Item,null,/*#__PURE__*/React.createElement(_WingBlank,{size:\"lg\"},/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(_InputItem,Object.assign({},getFieldProps('accountId'),{placeholder:\"\\u8D26\\u53F7\",type:\"text\"}))),/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(_InputItem,Object.assign({},getFieldProps('pwd'),{type:\"password\",placeholder:\"\\u5BC6\\u7801\"}))),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"xl\"}),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"xl\"}),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"xl\"}),/*#__PURE__*/React.createElement(_Button,{type:\"primary\",onClick:this.tiggerLogin.bind(this)},\"\\u767B\\u5F55\"),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"}),/*#__PURE__*/React.createElement(_Button,{type:\"default\",onClick:this.switchIndtify.bind(this)},\"\\u5207\\u6362\\u4E3A\\u201C\",getUnIdntityName(this.state.loginUserIdentity),\"\\u4EBA\\u5458\\u201D\")))));}}]);return BasicInputExample;}(React.Component);var BasicInputExampleWrapper=createForm()(BasicInputExample);export default connect(function(state,props){return state;},{setUserInfo:function setUserInfo(data){return{type:SET_USER_INFO,data:data};}})(BasicInputExampleWrapper);","map":null,"metadata":{},"sourceType":"module"}