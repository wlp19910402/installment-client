{"ast":null,"code":"import \"antd-mobile/lib/switch/style\";\nimport _Switch from \"antd-mobile/lib/switch\";\nimport \"antd-mobile/lib/toast/style\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport \"antd-mobile/lib/grid/style\";\nimport _Grid from \"antd-mobile/lib/grid\";\nimport \"antd-mobile/lib/card/style\";\nimport _Card from \"antd-mobile/lib/card\";\nimport \"antd-mobile/lib/wing-blank/style\";\nimport _WingBlank from \"antd-mobile/lib/wing-blank\";\nimport \"antd-mobile/lib/white-space/style\";\nimport _WhiteSpace from \"antd-mobile/lib/white-space\";\nimport \"antd-mobile/lib/modal/style\";\nimport _Modal from \"antd-mobile/lib/modal\";\nimport \"antd-mobile/lib/list/style\";\nimport _List from \"antd-mobile/lib/list\";\nvar _jsxFileName = \"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/src/components/main/My.js\";\nimport React from 'react';\nimport { LockOutlined, LogoutOutlined, CustomerServiceOutlined, UserOutlined, MobileOutlined, CreditCardOutlined, BankFilled, CarryOutFilled } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { CLEAR_USER_INFO, SET_WHETHER_ORDER } from '@/store/actions';\nimport { createForm } from 'rc-form';\nimport { USER_IDNTITY } from '@/plugins/resurceStatus/user';\nimport { CLIENT_INTERFACE } from '@/plugins/libs/interfaceMap';\nimport axios from 'axios';\nconst Item = _List.Item;\nconst alert = _Modal.alert;\nconst data = [{\n  \"icon\": () => /*#__PURE__*/React.createElement(MobileOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 15\n    }\n  }),\n  \"text\": \"15701578892\"\n}, {\n  \"icon\": () => /*#__PURE__*/React.createElement(CreditCardOutlined, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 15\n    }\n  }),\n  \"text\": \"银行卡中心\"\n}, {\n  \"icon\": () => /*#__PURE__*/React.createElement(BankFilled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 15\n    }\n  }),\n  \"text\": \"中国银行\"\n}];\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checked: false,\n      checked1: true\n    };\n  }\n\n  fetchUserTag() {\n    data.forEach((item, index) => {\n      if (index === 0) {\n        item.text = this.props.user.accountId;\n      } else if (index === 1) {\n        item.text = this.props.user.department;\n      } else if (index === 2) {\n        item.text = this.props.user.company_unit;\n      }\n    });\n    return data;\n  }\n\n  exitClearUserData() {\n    const alertInstance = alert('确认要退出登录吗', '', [{\n      text: '取消',\n      onPress: () => null,\n      style: 'default'\n    }, {\n      text: '确认退出',\n      onPress: () => {\n        this.props.parent.props.history.push('/login');\n        this.props.clearUserInfo();\n      }\n    }]);\n    setTimeout(() => {\n      // 可以调用close方法以在外部close\n      alertInstance.close();\n    }, 500000);\n  }\n\n  render() {\n    const {\n      getFieldProps\n    } = this.props.form;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qm-fill-width\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qm-main-my-header qm-bg-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(_WingBlank, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_Card.Header, {\n      title: /*#__PURE__*/React.createElement(_WingBlank, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(_WhiteSpace, {\n        size: \"md\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }, this.props.user.user_name), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"qm-text-primary qm-body-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      }, this.props.user.user_position), /*#__PURE__*/React.createElement(_WhiteSpace, {\n        size: \"md\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }\n      })),\n      thumb: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"qm-icon-cricle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(UserOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 48\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(_Card.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(_Grid, {\n      hasLine: false,\n      activeStyle: false,\n      data: this.fetchUserTag(),\n      columnNum: 2,\n      square: false,\n      itemStyle: {\n        float: \"left\",\n        textAlign: \"left\"\n      },\n      renderItem: dataItem => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }\n      }, dataItem.icon(), /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          marginLeft: \"4px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 35\n        }\n      }, dataItem.text)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }))))), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(_WingBlank, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }\n    }, this.props.user.accountType === USER_IDNTITY.FOREIGN_STAFF ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Item, {\n      thumb: /*#__PURE__*/React.createElement(CarryOutFilled, {\n        className: \"qm-text-primary mainIcon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 16\n        }\n      }),\n      extra: /*#__PURE__*/React.createElement(_Switch, Object.assign({}, getFieldProps('Switch1', {\n        initialValue: this.state.checked1,\n        valuePropName: 'checked',\n        onChange: val => {\n          console.log(val);\n        }\n      }), {\n        onClick: async checked => {\n          let userInfo = this.props.user;\n          console.log(userInfo);\n\n          try {\n            let res = await axios({\n              url: CLIENT_INTERFACE.WHETHER_TO_ORDER,\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json; charset=UTF-8',\n                \"accountId\": userInfo.accountId,\n                \"accountType\": userInfo.accountType,\n                \"token\": userInfo.token\n              },\n              data: {\n                \"whether_to_order\": checked ? 1 : 0\n              }\n            });\n\n            if (res.data.err !== '0') {\n              _Toast.info(res.data.msg, 1);\n\n              return;\n            } // console.log(this.props.parent.props.whether_to_order)\n\n\n            let userData = res.data.result;\n            console.log(\"返回的\", userData);\n            this.props.form.setFieldsValue({\n              Switch1: checked\n            });\n            this.props.form.setFieldsValue({\n              Switch1: userData === 0 ? false : true\n            });\n            console.log(this.state.checked, userData === 0 ? false : true);\n            this.props.setWhetherOrder(userData);\n          } catch (err) {\n            console.log(err); // Toast.info('请求异常', 1); //需删除\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 18\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }, \"\\u63A5\\u5355\")), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    })) : null, /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Item, {\n      thumb: /*#__PURE__*/React.createElement(LockOutlined, {\n        className: \"qm-text-waring mainIcon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 18\n        }\n      }),\n      arrow: \"horizontal\",\n      onClick: () => {},\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, \"\\u4FEE\\u6539\\u5BC6\\u7801\")), /*#__PURE__*/React.createElement(Link, {\n      to: \"/user/contact\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Item, {\n      thumb: /*#__PURE__*/React.createElement(CustomerServiceOutlined, {\n        className: \"qm-text-wait mainIcon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 18\n        }\n      }),\n      arrow: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }, \"\\u8054\\u7CFB\\u5BA2\\u670D\"))), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(Item, {\n      thumb: /*#__PURE__*/React.createElement(LogoutOutlined, {\n        className: \"qm-text-error mainIcon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 18\n        }\n      }),\n      arrow: \"horizontal\",\n      onClick: this.exitClearUserData.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 6\n      }\n    }, \" \\u9000\\u51FA\\u767B\\u5F55\"))));\n  }\n\n}\n\nexport default connect((state, props) => {\n  return { ...props,\n    ...state\n  };\n}, {\n  clearUserInfo() {\n    return {\n      type: CLEAR_USER_INFO\n    };\n  },\n\n  setWhetherOrder(data) {\n    return {\n      type: SET_WHETHER_ORDER,\n      data\n    };\n  }\n\n})(createForm()(HomePage));","map":{"version":3,"sources":["/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/src/components/main/My.js"],"names":["React","LockOutlined","LogoutOutlined","CustomerServiceOutlined","UserOutlined","MobileOutlined","CreditCardOutlined","BankFilled","CarryOutFilled","Link","connect","CLEAR_USER_INFO","SET_WHETHER_ORDER","createForm","USER_IDNTITY","CLIENT_INTERFACE","axios","Item","alert","data","HomePage","Component","constructor","props","state","checked","checked1","fetchUserTag","forEach","item","index","text","user","accountId","department","company_unit","exitClearUserData","alertInstance","onPress","style","parent","history","push","clearUserInfo","setTimeout","close","render","getFieldProps","form","user_name","user_position","float","textAlign","dataItem","icon","marginLeft","accountType","FOREIGN_STAFF","initialValue","valuePropName","onChange","val","console","log","userInfo","res","url","WHETHER_TO_ORDER","method","headers","token","err","info","msg","userData","result","setFieldsValue","Switch1","setWhetherOrder","bind","type"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Modal,Card, WingBlank, WhiteSpace,List,Grid,Switch,Toast} from 'antd-mobile';\nimport {LockOutlined,LogoutOutlined,CustomerServiceOutlined,UserOutlined,MobileOutlined,CreditCardOutlined,BankFilled,CarryOutFilled}from '@ant-design/icons'\nimport {Link}from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {CLEAR_USER_INFO,SET_WHETHER_ORDER}from '@/store/actions'\nimport { createForm } from 'rc-form';\nimport {USER_IDNTITY} from '@/plugins/resurceStatus/user'\nimport {CLIENT_INTERFACE}from '@/plugins/libs/interfaceMap'\nimport axios from 'axios'\n\nconst Item = List.Item;\nconst alert=Modal.alert;\nconst data =[\n  {\n  \"icon\":()=>(<MobileOutlined/>),\n  \"text\":\"15701578892\"\n},{\n  \"icon\":()=>(<CreditCardOutlined/>),\n  \"text\":\"银行卡中心\"\n},{\n  \"icon\":()=>(<BankFilled/>),\n  \"text\":\"中国银行\"\n}]\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checked: false,\n      checked1:true\n    };\n  }\n  fetchUserTag(){\n    data.forEach((item,index)=>{\n      if(index===0){\n        item.text=this.props.user.accountId\n      }else if(index===1){\n        item.text=this.props.user.department\n      }else if(index===2){\n        item.text=this.props.user.company_unit\n      }\n    })\n    return data\n  }\n  exitClearUserData(){\n    const alertInstance = alert('确认要退出登录吗','', [\n      { text: '取消', onPress: () => null, style: 'default' },\n      { text: '确认退出', onPress: () =>{\n        this.props.parent.props.history.push('/login')\n        this.props.clearUserInfo()\n      }},\n    ]);\n    setTimeout(() => {\n      // 可以调用close方法以在外部close\n      alertInstance.close();\n    }, 500000);\n  }\n  render() {\n    const { getFieldProps } = this.props.form;\n    return (\n      <div className=\"qm-fill-width\">\n      <div className=\"qm-main-my-header qm-bg-primary\">\n    <WhiteSpace size=\"md\" />\n      <WingBlank size=\"md\">\n      <Card>\n      <Card.Header\n        title={<WingBlank>\n          <WhiteSpace size=\"md\" />\n          <div>{this.props.user.user_name}</div>\n          <span className=\"qm-text-primary qm-body-1\">{this.props.user.user_position}</span>\n          <WhiteSpace size=\"md\" /></WingBlank>}\n        thumb={<div className=\"qm-icon-cricle\"><UserOutlined /></div>}\n      />\n      <Card.Body>\n        <Grid\n          hasLine={false}\n          activeStyle={false}\n          data={this.fetchUserTag()}\n          columnNum={2}\n          square={false}\n          itemStyle={{float:\"left\",textAlign:\"left\"}}\n          renderItem={dataItem => (\n            <div>{dataItem.icon()}<span style={{marginLeft:\"4px\"}}>{dataItem.text}</span></div>\n          )}\n        />\n      </Card.Body>\n    </Card>\n    </WingBlank>\n      </div>\n    <WhiteSpace size=\"md\" />\n    <WingBlank size=\"md\">\n    {this.props.user.accountType===USER_IDNTITY.FOREIGN_STAFF?\n    <div>\n      <List>\n      <Item\n        thumb={<CarryOutFilled className=\"qm-text-primary mainIcon\"/>}\n          extra={<Switch\n            {...getFieldProps('Switch1', {\n              initialValue: this.state.checked1,\n              valuePropName: 'checked',\n              onChange: (val) => {\n                console.log(val);\n              },\n            })}\n            onClick={async(checked) => {\n              let userInfo = this.props.user\n              console.log(userInfo)\n              try{\n                let res = await axios({\n                  url: CLIENT_INTERFACE.WHETHER_TO_ORDER,\n                  method: 'post',\n                  headers: {\n                    'Content-Type': 'application/json; charset=UTF-8',\n                    \"accountId\":userInfo.accountId,\n                    \"accountType\":userInfo.accountType,\n                    \"token\":userInfo.token\n                   },\n                  data:{\"whether_to_order\":checked?1:0}\n                })\n                if(res.data.err!=='0'){\n                  Toast.info(res.data.msg, 1);\n                  return\n                }\n                // console.log(this.props.parent.props.whether_to_order)\n                let userData = res.data.result\n                console.log(\"返回的\",userData)\n                this.props.form.setFieldsValue({\n                  Switch1: checked,\n                });\n                this.props.form.setFieldsValue({\n                Switch1: userData===0?false:true\n                });\n                console.log(this.state.checked,userData===0?false:true)\n                this.props.setWhetherOrder(userData)\n              }catch(err){\n                console.log(err)\n                // Toast.info('请求异常', 1); //需删除\n              }\n\n            }\n          }\n          />}\n        >接单</Item>\n      </List>\n      <WhiteSpace size=\"md\" />\n      </div>:null}\n    <List>\n    <Link to=\"/\">\n        <Item\n          thumb={<LockOutlined className=\"qm-text-waring mainIcon\"/>}\n          arrow=\"horizontal\"\n          onClick={() => {}}\n        >修改密码</Item></Link>\n        <Link to=\"/user/contact\">\n        <Item\n          thumb={<CustomerServiceOutlined  className=\"qm-text-wait mainIcon\"/>}\n          arrow=\"horizontal\"\n        >\n          联系客服\n        </Item>\n        </Link>\n      </List>\n    <WhiteSpace size=\"md\" />\n    <List>\n     <Item\n          thumb={<LogoutOutlined  className=\"qm-text-error mainIcon\"/>}\n          arrow=\"horizontal\"\n          onClick={this.exitClearUserData.bind(this)}\n        > 退出登录</Item>\n      </List>\n  </WingBlank>\n      </div>\n    );\n  }\n}\nexport default connect((state,props)=>{\n\treturn ({\n    ...props,\n    ...state\n  })\n},{\n  clearUserInfo(){\n\t\treturn{\n\t\t\ttype:CLEAR_USER_INFO\n\t\t}\n  },\n  setWhetherOrder(data){\n    return {\n      type:SET_WHETHER_ORDER,\n      data\n    }\n  }\n})(createForm()(HomePage))"]},"metadata":{},"sourceType":"module"}