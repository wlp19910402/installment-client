{"ast":null,"code":"import \"antd-mobile/lib/flex/style\";\nimport _Flex from \"antd-mobile/lib/flex\";\nimport \"antd-mobile/lib/wing-blank/style\";\nimport _WingBlank from \"antd-mobile/lib/wing-blank\";\nimport \"antd-mobile/lib/button/style\";\nimport _Button from \"antd-mobile/lib/button\";\nimport \"antd-mobile/lib/white-space/style\";\nimport _WhiteSpace from \"antd-mobile/lib/white-space\";\nimport \"antd-mobile/lib/list/style\";\nimport _List from \"antd-mobile/lib/list\";\nimport \"antd-mobile/lib/input-item/style\";\nimport _InputItem from \"antd-mobile/lib/input-item\";\nimport \"antd-mobile/lib/toast/style\";\nimport _Toast from \"antd-mobile/lib/toast\";\nvar _jsxFileName = \"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/src/views/user/UpdatePassword.js\";\n\n/**\n * 修改密码\n */\nimport React, { Component } from 'react';\nimport NavHeader from '@/components/common/NavHeader';\nimport { createForm } from 'rc-form'; // import {regexp} from '@/plugins/common/regexp'\n\nimport { CLEAR_USER_INFO } from '@/store/actions';\nimport { connect } from 'react-redux';\nimport { CLIENT_INTERFACE } from '@/plugins/libs/interfaceMap';\nimport axios from '@/plugins/requestServer/httpClient';\n\nclass UpdatePassword extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.tiggerUpdatePwd = async () => {\n      const {\n        getFieldValue\n      } = this.props.form;\n      const oldPwd = getFieldValue('oldPwd');\n      const newPwd1 = getFieldValue('newPwd1');\n      const newPwd2 = getFieldValue('newPwd2');\n\n      if (!oldPwd || !newPwd1 || !newPwd2) {\n        _Toast.info('账号和密码不能为空', 1);\n\n        return;\n      } //基本验证通过，请求登录\n\n\n      try {\n        let res = await axios.post(CLIENT_INTERFACE.UPDATE_PWD, {\n          oldPwd,\n          newPwd1,\n          newPwd2\n        });\n\n        if (res.data.err !== '0') {\n          _Toast.info(res.data.msg, 1);\n\n          return;\n        }\n\n        this.props.clearUserInfo();\n        let that = this;\n\n        _Toast.info(\"修改密码成功，即将跳转到登录，请重新登录\", 1);\n\n        setTimeout(function () {\n          that.props.history.replace('/login');\n        }, 1000);\n      } catch (err) {\n        console.log(err);\n\n        _Toast.info('请求异常', 1); //需删除\n\n      }\n    };\n  }\n\n  componentDidMount() {\n    document.body.querySelector(\".qm-login-page\").style.height = window.innerHeight + \"px\";\n  }\n\n  render() {\n    const {\n      getFieldProps\n    } = this.props.form;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qm-main-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(NavHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qm-login-page qm-fill-width \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"qm-title-box sub-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }, \"\\u4FEE\\u6539\\u5BC6\\u7801\")), /*#__PURE__*/React.createElement(_Flex, {\n      justify: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(_Flex.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(_WingBlank, {\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_InputItem, Object.assign({}, getFieldProps('oldPwd'), {\n      type: \"password\",\n      placeholder: \"\\u65E7\\u5BC6\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_InputItem, Object.assign({}, getFieldProps('newPwd1'), {\n      type: \"password\",\n      placeholder: \"\\u65B0\\u5BC6\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(_List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(_InputItem, Object.assign({}, getFieldProps('newPwd2'), {\n      type: \"password\",\n      placeholder: \"\\u65B0\\u5BC6\\u7801\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"xl\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.tiggerUpdatePwd.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"\\u786E\\u5B9A\\u4FEE\\u6539\"), /*#__PURE__*/React.createElement(_WhiteSpace, {\n      size: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\n;\nexport default connect((state, props) => {\n  return state;\n}, {\n  clearUserInfo(data) {\n    return {\n      type: CLEAR_USER_INFO,\n      data\n    };\n  }\n\n})(createForm()(UpdatePassword));","map":{"version":3,"sources":["/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/src/views/user/UpdatePassword.js"],"names":["React","Component","NavHeader","createForm","CLEAR_USER_INFO","connect","CLIENT_INTERFACE","axios","UpdatePassword","tiggerUpdatePwd","getFieldValue","props","form","oldPwd","newPwd1","newPwd2","info","res","post","UPDATE_PWD","data","err","msg","clearUserInfo","that","setTimeout","history","replace","console","log","componentDidMount","document","body","querySelector","style","height","window","innerHeight","render","getFieldProps","bind","state","type"],"mappings":"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","sourcesContent":["/**\n * 修改密码\n */\nimport React,{Component}from 'react'\nimport { List, InputItem, WhiteSpace ,Button,WingBlank,Flex,Toast } from 'antd-mobile';\nimport NavHeader from '@/components/common/NavHeader'\nimport { createForm } from 'rc-form';\n// import {regexp} from '@/plugins/common/regexp'\nimport {CLEAR_USER_INFO}from '@/store/actions'\nimport {connect} from 'react-redux'\nimport {CLIENT_INTERFACE}from '@/plugins/libs/interfaceMap'\nimport axios from '@/plugins/requestServer/httpClient'\n\nclass UpdatePassword extends Component{\n  componentDidMount(){\n    document.body.querySelector(\".qm-login-page\").style.height = window.innerHeight + \"px\"\n  }\n  tiggerUpdatePwd = async() => {\n    const { getFieldValue } = this.props.form;\n    const oldPwd = getFieldValue('oldPwd');\n    const newPwd1 = getFieldValue('newPwd1');\n    const newPwd2 = getFieldValue('newPwd2');\n    if(!oldPwd||!newPwd1||!newPwd2){\n      Toast.info('账号和密码不能为空', 1);\n      return\n    }\n    //基本验证通过，请求登录\n    try{\n      let res = await axios.post(CLIENT_INTERFACE.UPDATE_PWD,{oldPwd,newPwd1,newPwd2})\n      if(res.data.err!=='0'){\n        Toast.info(res.data.msg, 1);\n        return\n      }\n      this.props.clearUserInfo()\n      let that = this\n      Toast.info(\"修改密码成功，即将跳转到登录，请重新登录\", 1);\n      setTimeout(function(){\n        that.props.history.replace('/login');\n      },1000)\n      }catch(err){\n        console.log(err)\n        Toast.info('请求异常', 1); //需删除\n      }\n  }\n\n  render(){\n    const { getFieldProps } = this.props.form;\n    return (\n      <div className=\"qm-main-page\">\n        <NavHeader/>\n        <div className=\"qm-login-page qm-fill-width \">\n        <div className=\"qm-title-box sub-title\">\n          <div className=\"title\">修改密码</div>\n        </div>\n        <Flex justify=\"center\">\n          <Flex.Item>\n                <WingBlank size=\"lg\">\n                <List>\n                  <InputItem {...getFieldProps('oldPwd')} type=\"password\" placeholder=\"旧密码\"></InputItem>\n                </List>\n                <List>\n                  <InputItem {...getFieldProps('newPwd1')} type=\"password\" placeholder=\"新密码\"></InputItem>\n                </List>\n                <List>\n                  <InputItem {...getFieldProps('newPwd2')} type=\"password\" placeholder=\"新密码\"></InputItem>\n                </List>\n                <WhiteSpace size=\"xl\"/>\n                <WhiteSpace size=\"xl\"/>\n                <WhiteSpace size=\"xl\"/>\n                <Button type=\"primary\" onClick={this.tiggerUpdatePwd.bind(this)}>确定修改</Button>\n                <WhiteSpace size=\"md\"/>\n                </WingBlank>\n          </Flex.Item>\n        </Flex>\n      </div>\n      </div>\n    )\n  }\n};\n\nexport default connect((state,props)=>{\n\treturn state\n},{\n\tclearUserInfo(data){\n\t\treturn{\n\t\t\ttype:CLEAR_USER_INFO,\n\t\t\tdata\n\t\t}\n  }\n})(createForm()(UpdatePassword))"]},"metadata":{},"sourceType":"module"}