{"ast":null,"code":"import _objectSpread from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import\"antd-mobile/lib/switch/style\";import _Switch from\"antd-mobile/lib/switch\";import _regeneratorRuntime from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import\"antd-mobile/lib/toast/style\";import _Toast from\"antd-mobile/lib/toast\";import _asyncToGenerator from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import\"antd-mobile/lib/grid/style\";import _Grid from\"antd-mobile/lib/grid\";import\"antd-mobile/lib/card/style\";import _Card from\"antd-mobile/lib/card\";import\"antd-mobile/lib/wing-blank/style\";import _WingBlank from\"antd-mobile/lib/wing-blank\";import\"antd-mobile/lib/white-space/style\";import _WhiteSpace from\"antd-mobile/lib/white-space\";import _classCallCheck from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/wlp6897/newProjects/cordovaProjects/installment/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"antd-mobile/lib/modal/style\";import _Modal from\"antd-mobile/lib/modal\";import\"antd-mobile/lib/list/style\";import _List from\"antd-mobile/lib/list\";import React from'react';import{LockOutlined,LogoutOutlined,CustomerServiceOutlined,UserOutlined,MobileOutlined,CreditCardOutlined,BankFilled,CarryOutFilled}from'@ant-design/icons';import{Link}from'react-router-dom';import{connect}from'react-redux';import{CLEAR_USER_INFO,SET_ACCEPT_ORDER_STATUS}from'@/store/actions';import{createForm}from'rc-form';import{USER_IDNTITY}from'@/plugins/resurceStatus/user';import{CLIENT_INTERFACE}from'@/plugins/libs/interfaceMap';import axios from'axios';var Item=_List.Item;var alert=_Modal.alert;var data=[{\"icon\":function icon(){return/*#__PURE__*/React.createElement(MobileOutlined,null);},\"text\":\"15701578892\"},{\"icon\":function icon(){return/*#__PURE__*/React.createElement(CreditCardOutlined,null);},\"text\":\"银行卡中心\"},{\"icon\":function icon(){return/*#__PURE__*/React.createElement(BankFilled,null);},\"text\":\"中国银行\"}];var HomePage=/*#__PURE__*/function(_React$Component){_inherits(HomePage,_React$Component);var _super=_createSuper(HomePage);function HomePage(props){var _this;_classCallCheck(this,HomePage);_this=_super.call(this,props);_this.state={checked:false,checked1:true};return _this;}_createClass(HomePage,[{key:\"fetchUserTag\",value:function fetchUserTag(){var _this2=this;data.forEach(function(item,index){if(index===0){item.text=_this2.props.user.accountId;}else if(index===1){item.text=_this2.props.user.department;}else if(index===2){item.text=_this2.props.user.companyUnit;}});return data;}},{key:\"exitClearUserData\",value:function exitClearUserData(){var _this3=this;var alertInstance=alert('确认要退出登录吗','',[{text:'取消',onPress:function onPress(){return null;},style:'default'},{text:'确认退出',onPress:function onPress(){_this3.props.parent.props.history.push('/login');_this3.props.clearUserInfo();}}]);setTimeout(function(){// 可以调用close方法以在外部close\nalertInstance.close();},500000);}},{key:\"render\",value:function render(){var _this4=this;var getFieldProps=this.props.form.getFieldProps;return/*#__PURE__*/React.createElement(\"div\",{className:\"qm-fill-width\"},/*#__PURE__*/React.createElement(\"div\",{className:\"qm-main-my-header qm-bg-primary\"},/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"}),/*#__PURE__*/React.createElement(_WingBlank,{size:\"md\"},/*#__PURE__*/React.createElement(_Card,null,/*#__PURE__*/React.createElement(_Card.Header,{title:/*#__PURE__*/React.createElement(_WingBlank,null,/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"}),/*#__PURE__*/React.createElement(\"div\",null,this.props.user.userName),/*#__PURE__*/React.createElement(\"span\",{className:\"qm-text-primary qm-body-1\"},this.props.user.user_position),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"})),thumb:/*#__PURE__*/React.createElement(\"div\",{className:\"qm-icon-cricle\"},/*#__PURE__*/React.createElement(UserOutlined,null))}),/*#__PURE__*/React.createElement(_Card.Body,null,/*#__PURE__*/React.createElement(_Grid,{hasLine:false,activeStyle:false,data:this.fetchUserTag(),columnNum:2,square:false,itemStyle:{float:\"left\",textAlign:\"left\"},renderItem:function renderItem(dataItem){return/*#__PURE__*/React.createElement(\"div\",null,dataItem.icon(),/*#__PURE__*/React.createElement(\"span\",{style:{marginLeft:\"4px\"}},dataItem.text));}}))))),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"}),/*#__PURE__*/React.createElement(_WingBlank,{size:\"md\"},this.props.user.accountType===USER_IDNTITY.FOREIGN_STAFF?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(Item,{thumb:/*#__PURE__*/React.createElement(CarryOutFilled,{className:\"qm-text-primary mainIcon\"}),extra:/*#__PURE__*/React.createElement(_Switch,Object.assign({},getFieldProps('acceptOrderStatus',{initialValue:this.state.checked1,valuePropName:'checked',onChange:function onChange(val){console.log(val);}}),{onClick:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(checked){var userInfo,res,userData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userInfo=_this4.props.user;_context.prev=1;_context.next=4;return axios({url:CLIENT_INTERFACE.SET_ACCEPT_ORDER_STATUS,method:'post',headers:{'Content-Type':'application/json; charset=UTF-8',\"accountId\":userInfo.accountId,\"accountType\":userInfo.accountType,\"token\":userInfo.token},data:{\"acceptOrderStatus\":checked?1:0}});case 4:res=_context.sent;if(!(res.data.err!=='0')){_context.next=8;break;}_Toast.info(res.data.msg,1);return _context.abrupt(\"return\");case 8:userData=res.data.result;_this4.props.form.setFieldsValue({acceptOrderStatus:userData===0?false:true});_this4.props.setWhetherOrder(userData);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return function(_x){return _ref.apply(this,arguments);};}()}))},\"\\u63A5\\u5355\")),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"})):null,/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(Item,{thumb:/*#__PURE__*/React.createElement(LockOutlined,{className:\"qm-text-waring mainIcon\"}),arrow:\"horizontal\",onClick:function onClick(){}},\"\\u4FEE\\u6539\\u5BC6\\u7801\")),/*#__PURE__*/React.createElement(Link,{to:\"/user/contact\"},/*#__PURE__*/React.createElement(Item,{thumb:/*#__PURE__*/React.createElement(CustomerServiceOutlined,{className:\"qm-text-wait mainIcon\"}),arrow:\"horizontal\"},\"\\u8054\\u7CFB\\u5BA2\\u670D\"))),/*#__PURE__*/React.createElement(_WhiteSpace,{size:\"md\"}),/*#__PURE__*/React.createElement(_List,null,/*#__PURE__*/React.createElement(Item,{thumb:/*#__PURE__*/React.createElement(LogoutOutlined,{className:\"qm-text-error mainIcon\"}),arrow:\"horizontal\",onClick:this.exitClearUserData.bind(this)},\" \\u9000\\u51FA\\u767B\\u5F55\"))));}}]);return HomePage;}(React.Component);export default connect(function(state,props){return _objectSpread(_objectSpread({},props),state);},{clearUserInfo:function clearUserInfo(){return{type:CLEAR_USER_INFO};},setWhetherOrder:function setWhetherOrder(data){return{type:SET_ACCEPT_ORDER_STATUS,data:data};}})(createForm()(HomePage));","map":null,"metadata":{},"sourceType":"module"}